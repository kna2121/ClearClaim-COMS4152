<div class="container">
  <div class="welcome-section">
    <h1>Your AI Appeal Assistant</h1>
    <p class="tagline">Get started</p>
    <p>Upload your medical claim document to begin automated analysis</p>
  </div>

  <div class="upload-card">
    <form id="upload-form" enctype="multipart/form-data">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      
      <div class="upload-area" id="upload-area">
        <div class="upload-icon-wrapper">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
        </div>
        <h3 class="upload-title">Choose a PDF file or drag it here</h3>
        <p class="upload-description">Medical claim documents • PDF format • Maximum size 10MB</p>
        <input type="file" name="file" accept="application/pdf" required id="pdf-input">
      </div>
      
      <div id="file-selected" style="display: none;">
        <div class="file-card">
          <div class="file-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
          </div>
          <div class="file-details">
            <div class="file-name" id="file-name"></div>
            <div class="file-meta" id="file-size"></div>
          </div>
          <button type="button" class="btn-remove" id="remove-file">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        
        <div id="preview-container" class="preview-container">
          <div class="preview-header">
            <span class="preview-title">Document Preview</span>
          </div>
          <div class="preview-frame">
            <iframe id="pdf-preview-iframe"></iframe>
          </div>
        </div>
      </div>
      
      <button type="submit" class="btn-primary" id="submit-btn" disabled>
        <span id="btn-text">Analyze Document</span>
        <span id="btn-loading" style="display: none;">
          <svg class="spinner" width="20" height="20" viewBox="0 0 50 50">
            <circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5"></circle>
          </svg>
          Analyzing...
        </span>
      </button>
    </form>
  </div>

  <div id="results-section" class="results-section" style="display: none;">
    <div class="results-header">
      <h2>Claim Analysis Results</h2>
      <p class="results-subtitle">Document successfully parsed and analyzed</p>
    </div>
    <div id="results-content" class="results-grid"></div>
    
    <div class="action-buttons" style="display: none;" id="action-buttons">
      <button class="btn-secondary" onclick="generateAppeal()">Generate Appeal Letter</button>
      <button class="btn-secondary" onclick="resetForm()">Analyze Another Document</button>
    </div>
  </div>

  <div id="error-section" class="error-section" style="display: none;">
    <div class="error-content" id="error-content"></div>
  </div>
</div>

<%= javascript_include_tag 'upload', nonce: true %>

